<link rel="import" href="/bower_components/polymer/polymer-element.html">

<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">

<dom-module id="order-place">
  <template>
    <iron-ajax id="orderRequest" url="[[url]]" method="POST" body="[[_body(user, items)]]" content-type="application/json"></iron-ajax>
    <paper-icon-button icon="icons:payment" on-click="order"></paper-icon-button>
  </template>
  <script>
  class OrderPlace extends Polymer.Element {
    static get is() { return 'order-place'; }
    static get properties() {
      return {
        items: Array,
        user: String,
        url: String
      }
    }
    
    _body(user, items) {
      return { user: user, items: items };
    }
    
    order() {
      this.$.orderRequest.generateRequest();
    }
  }
  
  window.customElements.define(OrderPlace.is, OrderPlace);
  </script>
</dom-module>